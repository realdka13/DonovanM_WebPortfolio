<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">

		<title>Donovan Magney - Computer Engineering Student</title>
		<meta name="description" content="Model Rocket Flight Computer Details">
        <meta name="author" content="Donovan Magney">
        <!-- 
        Lavish HTML CSS Template
        https://templatemo.com/tm-458-lavish
        -->
        
		<meta http-equiv="X-UA-Compatible" content="IE=Edge">
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<!-- animate -->
		<link rel="stylesheet" href="../css/animate.min.css">
		<!-- bootstrap -->
		<link rel="stylesheet" href="../css/bootstrap.min.css">
		<!-- font-awesome -->
		<link rel="stylesheet" href="../css/font-awesome.min.css">
		<!-- google font -->
		<link href='http://fonts.googleapis.com/css?family=Raleway:400,300,700,800' rel='stylesheet' type='text/css'>
		<!-- fullpage -->
		<link rel="stylesheet" href="../css/jquery.fullPage.css">
		<!-- custom -->
		<link rel="stylesheet" href="../css/projectpagestyle.css">
	</head>
	<body>

	<div id="fullpage">

		<div id="fullpage">
			<!-- start home -->
			<div id="home" class="section flightcomputer-bg">
				<div class="container">
					<div class="row">
						<div class="col-md-2"></div>
						<div class="col-md-8 wow fadeIn" data-wow-delay="0.0s">
							<h1>Model Rocket Flight Computer</h1>
							<h3>*WORK IN PROGRESS*</h3>
							<h3>Objective</h3>
							<p>Learn the basics of using a microcontroller by creating a flight computer for a model rocket</p>
						</div>
						<div class="col-md-2"></div>
					</div>
				</div>
			</div>
			<!-- end home -->

		<!-- start overview -->
		<div id="overview" class="section">
			<div class="container">
				<div class="col-md-12 wow">
					<h2>Overview</h2>
				</div>
				<div class="col-md-6 col-xs-11 wow fadeInLeft" style="width: 100%;" data-wow-delay="0.25s">
				<p>
					To learn how to use a plain microcontroller (instead of a prebuilt board such as the Arduino), a flight computer
					is a great project because it can start very simple, logging data. Later, this can be expanded
					to actually have control over the rocket. Such as triggering ejection charges or thrust vector control (TVC, moving the motor
					to maintain control of the rocket in flight). For now however, we will stick with a data logger.
					This variant of the flight computer will include a few things:
				</p>
					<ul>
						<li>Accelerometers</li>
						<li>Gyroscopes</li>
						<li>Magnetometer</li>
						<li>Barometer (for altitude)</li>
						<li>A method of saving the data</li>
						<li>A method to transmit the data live in case of vehicle destruction</li>
					</ul>
				</div>
			</div>
		</div>
		<!-- end overview -->

		<!-- start finalproduct -->
		<div id="finalproduct" class="section">
			<div class="container">
				<div class="col-md-12 wow">
					<h2>Progress</h2>
				</div>
				<div class="col-md-6 col-xs-11 wow fadeInLeft" style="width: 100%;" data-wow-delay="0.25s">
				<p>
					To start off easy, I started with an ATmega 328p, the same chip used by the Arduino. I did this because it will allow me to
					use the Arduino IDE and libraries to learn how the individual components work, like all of the sensors, before moving on to
					the microcontroller (MCU) itself. This will help me with figuring out if any issues are hardware problems or software.
					<br><br>
					<h4>Saving Data</h4>
					I decided to tackle the method of saving the data first, since this will be useful when wiring up the sensors. There are 2
					common solutions to this. A flash chip and an SD card. An SD card is a simple solution, ther Arduino has a library available
					and there are tons of resources online using them. However, others (such as BPS Space on YouTube) have explained their issue
					of issues writing to the SD card during flight due to all of the vibrations. A flash chip wont have this issue. It's much more
					reliable but somes with the tradeoff of being more difficult to implement. Additionally, an SD card is easy to remove and transfer the data,
					whereas a flash chip needs an alternative way to move the data.
					<br><br>
					I decided on an SD card. The kind of rocket I will be using this first version on will be quite small, and I expect the vibrations
					to not be too bad, and I should be able to find a connector rated for some extent of vibrations. Testing will be needed later to
					test that theory. It also makes the computer much simpler since I would likely need an SD card anyway to take the data off of the flash chip.
				</p>
				<div class="container">
					<div class="row">
						<div class="col">
							<figure>
								<img src="../images/SDCard.jpg" alt="SD Card connection to ATmega" class="center">
								<figcaption class="caption">SD Card connection to ATmega</figcaption>
							</figure>
						</div>
					</div>
				</div>
				<p>
					I couldn't find a micro SD card connector that would fit in a breadboard, so I made my own by soldering some header pins the the pads
					of the micro to full size SD card container. One interesting problem with the SD card s that it runs off of 3.3V, while the ATmega runs off of 5V. To get around this, I used a
					logic level converter for the logic connections, and then used a 3.3V voltage regulator for Vcc. The code is very simple, using the Arduino libraries
					and can be found on <a href="https://github.com/realdka13/Full-Arduino-Code-Set/blob/master/BareSDCard/BareSDCard.ino" target="__blank">GitHub here</a> and basically just checks
					for a connection, and will attempt to create and open a new file, write to it, then close and reopen it to read from and display to the Arduino serial port.
					This code was taken from another persons tutorial online and then modified to fit my use case.
				</p>
				<br>
				<h4>Collecting Data</h4>
				<p>
					To simplify the sensor setup, I used an inertial measurment unit, or IMU. This sensor is really just 3 sensors in 1, the accelerometer, gyroscope, and magnetometer.
					I selected the BNO055 for the existances of Arduino libraries and good reviews. This IMU also has a lot of built in functions which allow you to
					receive just raw data, or something like quaternions. It also has the ability to calibrate the sensors. The tradoff is this is a relatively expensive IMU
					for the scale. For the test <a href="https://github.com/realdka13/Full-Arduino-Code-Set/blob/master/IMU%20Project/IMU/IMU.ino" target="__blank">code</a>, I connect to the IMU thorugh I2C
					and grab data from each of the 3 sensors as well as the sensor temperature and calibration data every 100ms, the refresh rate of the BNO. These all then get printed to the screen and can be
					intercepted by an external application for graphing.
					<br><br>
					The pressure sensor that was used is the BMP388, again for the prebuilt libraries, and the lack of stock of the BMP390. This sensor is connected on the same I2C bus as the BNO.
					The <a href="https://github.com/realdka13/Full-Arduino-Code-Set/blob/master/PressureSensorTest/PressureSensorTest.ino" target="__blank">code</a> grabs the pressure
					data from the sensor and divides it by 100 to convert it to Hectopascals. Examples of all of these can be seen below.
				</p>
				<div class="container">
					<div class="row">
						<div class="col">
							<figure>
								<img src="../images/SensorData.PNG" alt="Accelerometer, gyroscope, and magnetometer data from BNO055" class="center">
								<figcaption class="caption">Accelerometer, gyroscope, and magnetometer data from BNO055</figcaption>
							</figure>
						</div>
					</div>
				</div>
				<br>
				<h4>Moving to the PIC24f</h4>
				<p>
					At this point I've run into an issue with the ATmega. After combining the code from the sensors, the SD card, reading the battery voltage (which I didn't talk about),
					and starting to add a wireless option, I have run out of flash memory. Since I've tested each piece to some extent, I decide that this is the time to switch to a new IMU.
					I selected the PIC24FJ32GA002, since its flash is double the size of the ATmega328p. It also comes with 2 UART registers which will be important later. The PICs are also the MCU used
					by the University of Minnesota classes and by the Rocket Team, so this will give me a head start in future classes and doing my part on the Rocket Team.
				</p>
				</div>
			</div>
		</div>
		<!-- end finalproduct -->

		<!-- start conclusion -->
		<div id="conclusion" class="section">
			<div class="container">
				<div class="col-md-12 wow">
					<h2>Next Steps</h2>
				</div>
				<div class="col-md-6 col-xs-11 wow fadeInLeft" style="width: 100%;" data-wow-delay="0.25s">
					<p>
						I am currently in the process of switching over to the PIC. I have never used it before so I will be starting with the hardware equivalent to "Hello World",
						and making an LED blink. I will then have to setup a UART connection to the computer manually to allow me to get the sensor data to my computer until I am able
						to setup wireless transmission. Following those will then again be the sensors. However, it is quite difficult to get a BNO055 and a BMP388 without a breakout board,
						and are expensive chips anyway. I am going to have to look into possibly using different sensors to get around this. Alternatively, I could desolder the sensors from their breakouts
						to use on my own boards, but this is an even more expensive option since breakouts tend to be more expensive that the sensor itself.
					</p>
				</div>
			</div>
		</div>
		<!-- end conclusuon -->

		<!-- start footer -->
		<footer>
			<div class="container">
				<div class="row">
					<div class="col-md-12 wow fadeIn" data-wow-delay="0.25s">
						<ul class="social-icon">
							<li><a href="https://twitter.com/DonovanMagney" target="_blank" class="fa fa-twitter"></a></li>
							<li><a href="https://www.linkedin.com/in/donovanmagney" target="_blank" class="fa fa-linkedin"></a></li>
							<li><a href="https://github.com/realdka13" target="_blank" class="fa fa-github"></a></li>
						</ul>
					</div>
				</div>
			</div>
		</footer>
		<!-- end footer -->

	</div>
		<!-- jQuery -->
		<script src="../js/jquery.js"></script>
		<!-- bootstrap -->
		<script src="../js/bootstrap.min.js"></script>
		<!-- fullpage -->
		<script src="../js/jquery.fullPage.js"></script>
		<!-- smoothScroll -->
		<script src="../js/smoothscroll.js"></script>
		<!-- wow -->
		<script src="../js/wow.min.js"></script>
		<!-- text rotater -->
		<script src="../js/jquery.simple-text-rotator.js"></script>
		<!-- custom -->
		<script src="../js/custom.js"></script>
	</body>
</html>